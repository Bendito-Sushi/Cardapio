let pedido = [ // Todos os itens do cardapio
    {
        id: 0,
        nome: "Sunomono",
        quantidade: 0,
        visivel: false,
        preco: 10
    },
    
    {
        id: 1,
        nome: "Ceviche Salmão",
        quantidade: 0,
        visivel: false,
        preco: 20
    },
    
    {
        id: 2,
        nome: "Ceviche Atum",
        quantidade: 0,
        visivel: false,
        preco: 15
    },
    
    {
        id: 3,
        nome: "Ceviche Peixe Branco",
        quantidade: 0,
        visivel: false,
        preco: 18
    },

    {
        id: 4,
        nome: "Filadélfia Skin (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 8
    },

    {
        id: 5,
        nome: "Filadélfia Salmão (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 6,
        nome: "Filadélfia Atum (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 7,
        nome: "Filadélfia Camarão (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 8,
        nome: "Uramaki Califórnia (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 9,
        nome: "Uramaki Salmão (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 10,
        nome: "Uramaki Atum (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 11,
        nome: "Uramaki Camarão (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 12,
        nome: "Uramaki Skin (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 8
    },

    {
        id: 13,
        nome: "Niguiri Salmão (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 14,
        nome: "Niguiri Atum (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 15,
        nome: "Niguiri Peixe Branco (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 16,
        nome: "Salmão Ice (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 17,
        nome: "Salmão Ice Geleia de Pimenta (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 18,
        nome: "Salmão Ice Flambado (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 19,
        nome: "Salmão Ice Flambado Geleia de Pimenta",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 20,
        nome: "Jow Jow Salmão (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 21,
        nome: "Jow Jow Atum (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 22,
        nome: "Jow Jow Peixe Branco (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 23,
        nome: "Jow Jow Camarão (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 24,
        nome: "Jow Jow Skin (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 25,
        nome: "Sashimi Salmão (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 26,
        nome: "Sashimi Atum (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 27,
        nome: "Sashimi Peixe Branco (5 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 28,
        nome: "Temaki Salmão (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 25
    },

    {
        id: 29,
        nome: "Temaki Atum (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 17
    },

    {
        id: 30,
        nome: "Temaki Camarão (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 28
    },

    {
        id: 31,
        nome: "Temaki Califórnia (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 32,
        nome: "Temaki Skin (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 33,
        nome: "Hot Filadélfia Salmão (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 34,
        nome: "Hot Filadélfia Atum (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 35,
        nome: "Hot Filadélfia Skin (10 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 8
    },

    {
        id: 36,
        nome: "Temaki Hot Salmão (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 25
    },

    {
        id: 37,
        nome: "Temaki Hot Atum (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 20
    },

    {
        id: 38,
        nome: "Temaki Hot Peixe Branco (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 20
    },

    {
        id: 39,
        nome: "Temaki Hot Camarão (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 25
    },

    {
        id: 40,
        nome: "Temaki Hot Skin (1 unidade)",
        quantidade: 0,
        visivel: false,
        preco: 18
    },

    {
        id: 41,
        nome: "Combo I",
        quantidade: 0,
        visivel: false,
        preco: 45
    },

    {
        id: 42,
        nome: "Combo II",
        quantidade: 0,
        visivel: false,
        preco: 55
    },

    {
        id: 43,
        nome: "Combo III",
        quantidade: 0,
        visivel: false,
        preco: 60
    },

    {
        id: 44,
        nome: "Combo IV",
        quantidade: 0,
        visivel: false,
        preco: 65
    },

    {
        id: 45,
        nome: "Combo V",
        quantidade: 0,
        visivel: false,
        preco: 80
    },

    {
        id: 46,
        nome: "Yakisoba Camarão",
        quantidade: 0,
        visivel: false,
        preco: 30
    },

    {
        id: 47,
        nome: "Yakisoba Salmão",
        quantidade: 0,
        visivel: false,
        preco: 35
    },

    {
        id: 48,
        nome: "Yakisoba Carne",
        quantidade: 0,
        visivel: false,
        preco: 30
    },

    {
        id: 49,
        nome: "Yakisoba Frango",
        quantidade: 0,
        visivel: false,
        preco: 25
    },

    {
        id: 50,
        nome: "Yakisoba Legumes",
        quantidade: 0,
        visivel: false,
        preco: 20
    },

    {
        id: 51,
        nome: "Yakisoba Misto Carne e Frango",
        quantidade: 0,
        visivel: false,
        preco: 30
    },

    {
        id: 52,
        nome: "Harumaki Romeu e Julieta (2 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 53,
        nome: "Harumaki Doce de Leite (2 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 10
    },

    {
        id: 54,
        nome: "Harumaki Baton Preto (2 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 55,
        nome: "Harumaki Baton Branco (2 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 56,
        nome: "Harumaki Banana com Chocolate (2 unidades)",
        quantidade: 0,
        visivel: false,
        preco: 12
    },

    {
        id: 57,
        nome: "Coca-Cola 2L",
        quantidade: 0,
        visivel: false,
        preco: 15
    },

    {
        id: 58,
        nome: "Guaraná 2L",
        quantidade: 0,
        visivel: false,
        preco: 13
    },

    {
        id: 59,
        nome: "Coca-Cola Lata 350ML",
        quantidade: 0,
        visivel: false,
        preco: 8
    },

    {
        id: 60,
        nome: "Guaraná Lata 350ML",
        quantidade: 0,
        visivel: false,
        preco: 8
    },

    {
        id: 61,
        nome: "Vinho",
        quantidade: 0,
        visivel: false,
        preco: 100
    }
]

function listarPedido(id) { // Deixa os itens e suas quantidades do pedido visivel para usuario
    if (pedido[id].quantidade > 1) {
        document.getElementById("item" + id).innerText = pedido[id].nome+": "+pedido[id].quantidade
    } else if (pedido[id].quantidade == 1 && pedido[id].visivel == false) {
        document.getElementById("itensPedido").innerHTML += "<p id=item"+id+">"+pedido[id].nome+": "+pedido[id].quantidade+"</p>"
        pedido[id].visivel = true
    } else if (pedido[id].quantidade == 1) {
        document.getElementById("item" + id).innerText = pedido[id].nome+": "+pedido[id].quantidade
    } else if (pedido[id].quantidade == 0){
        pedido[id].visivel = false
        document.getElementById("item" + id).innerText = "" // Isso é temporario para quando não funcionar o .remove
        document.getElementById("item" + id).remove() // Atualizar isso assim que possivel, remove não funciona em alguns navegadores.
    }
}

function adicionarItem(id) { // Aumenta a quantidade do item e atualiza o input
    pedido[id].quantidade++
    document.getElementById("input" + id).value = pedido[id].quantidade
    listarPedido(id)
    mostrarPreco()
} 

function removerItem(id) { // Diminui a quantidade do item e atualiza o input
    if (pedido[id].quantidade > 0) { // Verifica se o valor é zero, caso seja a função não faz nada. Serve para evitar que o visor fique negativo
        pedido[id].quantidade--
        document.getElementById("input" + id).value = pedido[id].quantidade
        listarPedido(id)
        mostrarPreco()
    }
}

function limpaItens() { // Limpa o pedido
    for (let i = 0; i < pedido.length; i++) {
        pedido[i].quantidade = 0
        pedido[i].visivel = false
        document.getElementById("input" + i).value = pedido[i].quantidade
        document.getElementById("itensPedido").innerText = ""
    }
    document.getElementById("botao-entrada").innerText = "+" // Não consegui usar a classe dos botões para mudar todos de uma vez
    document.getElementById("botao-makimonos").innerText = "+"
    document.getElementById("botao-uramaki").innerText = "+"
    document.getElementById("botao-niguiri").innerText = "+"
    document.getElementById("botao-salmaoice").innerText = "+"
    document.getElementById("botao-jowjow").innerText = "+"
    document.getElementById("botao-sashimi").innerText = "+"
    document.getElementById("botao-temaki").innerText = "+"
    document.getElementById("botao-fritos").innerText = "+"
    document.getElementById("botao-combos").innerText = "+"
    document.getElementById("botao-yakisobas").innerText = "+"
    document.getElementById("botao-harumakisdoces").innerText = "+"
    document.getElementById("botao-bebidas").innerText = "+"
    document.getElementById("preco-final").innerText = "Total: 0 R$"
}

function pedidoTexto() { // Cria uma string do pedido
    let pedidoTexto = "Meu pedido:"
    for (let i = 0; i < pedido.length; i++) {
        if (pedido[i].quantidade > 0) {
            pedidoTexto += "    " + pedido[i].nome + ": " + pedido[i].quantidade + "," 
        }
    }
    pedidoTexto = pedidoTexto.replace(/.$/, ".")
    return (pedidoTexto) 
}

function copiarPedido() { // Copia para area de transferencia o pedido
    // Alterar assim que possivel:
    document.getElementById("salvando-texto").value = pedidoTexto()
    document.getElementById("salvando-texto").select()
    document.execCommand("copy")
}

function enviarPedido() { // Leva para o WhatsApp já com o pedido
    let pedido = pedidoTexto()
    pedido = pedido.replace(/ /g, "%20")
    pedido = "https://wa.me/5522999168757?text=" + pedido
    window.open(pedido, "_blank").focus()
}

function mostrarPreco() { // Mostra o preço total
    let preco = 0
    for (let i = 0; i < pedido.length; i++) {
        if (pedido[i].quantidade > 0) {
            preco += pedido[i].quantidade * pedido[i].preco
        }
    }
    preco = "Total: " + preco + " R$"
    document.getElementById("preco-final").innerText = preco
}